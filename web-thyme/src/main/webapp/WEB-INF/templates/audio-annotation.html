<html xmlns:th="http://www.thymeleaf.org">

<link rel="stylesheet" type="text/css" href="resources/css/audio-annotation.css"/>

<head>
    <title>Welcome to AudioAnnotation</title>

    <script src="resources/javascript/selectionOverlay.js"></script>
    <script src="resources/javascript/waveForm.js"  type="text/javascript"></script>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
</head>

<script type="text/javascript" charset="utf-8">
    //<![CDATA[

    var selectionOverlay;

    function createComment() {
        console.log( "creating comment" );

        if ( selectionOverlay.startX > -1 ) {
            console.log( waveformObj.idIndexFile + ": creating region from " + selectionOverlay.startX + " to " + selectionOverlay.endX );
        }
    }

    $( window ).resize( function( e ) {
    } );

    $( document ).ready( function() {
        selectionOverlay    = new SelectionOverlay( overlay );
        waveformObj         = new Waveform( waveform );

        waveformObj.resetCanvas();
    } );

    //]]>
</script>

<body>

<div class="container">
    <div class="inner-container">
        <div class="waveform">
            <canvas id="waveform"></canvas>
        </div>
        <div class="overlay">
            <canvas id="overlay"></canvas>
        </div>
    </div>
</div>

<input id="commentButton" type="button" value="Comment" onclick="window.createComment();"/>

<div th:unless="${#lists.isEmpty(allIndexFiles)}">
    <p th:each="indexFile : ${allIndexFiles}">
        <a href="javascript:void(0);" th:onclick="'javascript:window.waveformObj.loadIndexFile( \'' + ${ indexFile.id} + '\');'">
            <div class="index-file-list-element">
                <span th:text="${indexFile.name}"/>
            </div>
        </a>
    </p>
</div>


</body>
</html>